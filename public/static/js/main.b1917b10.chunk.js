(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{17:function(e,s,t){},18:function(e,s,t){},21:function(e,s,t){"use strict";t.r(s);var i=t(1),n=t.n(i),c=t(12),r=t.n(c),a=(t(17),t(3)),l=(t(18),t(6)),h=t(2),o=t(7),u=t(5),d=t(0);var j=function(e){var s=e.loginUrl,t=e.setUser,n=e.user,c=Object(h.f)(),r=Object(i.useState)({username:"",password:""}),j=Object(a.a)(r,2),m=j[0],b=j[1],p=function(e){var s=e.target.name;b(Object(u.a)(Object(u.a)({},m),{},Object(o.a)({},s,e.target.value)))};function _(e){e.preventDefault(),fetch("".concat(s),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:m.username,password:m.password})}).then((function(e){e.ok?(e.json().then((function(e){return t(e)})),c("/measurements")):b({username:"",password:""})})),console.log("Login.js user",n)}return Object(d.jsxs)("div",{id:"login_box",children:[Object(d.jsx)("h1",{children:"Login"}),Object(d.jsxs)("form",{id:"user_login",autoComplete:"off",onSubmit:_,children:[Object(d.jsx)("h4",{className:"login_descriptor",children:"Username"}),Object(d.jsx)("input",{required:!0,value:m.username,type:"text",className:"login_input_fields",id:"username_field",name:"username",placeholder:"Username",onChange:p}),Object(d.jsx)("br",{}),Object(d.jsx)("h4",{className:"login_descriptor",children:"Password"}),Object(d.jsx)("input",{required:!0,value:m.password,type:"password",className:"login_input_fields",id:"password_field",name:"password",placeholder:"Password",onChange:p}),Object(d.jsx)("br",{}),Object(d.jsxs)("span",{children:[Object(d.jsx)("button",{id:"sign_in_button",onClick:_,children:"Sign In"}),Object(d.jsx)(l.b,{id:"sign_up",to:"/signup",children:"Sign Up"})]})]})]})},m=t(8),b=t.n(m),p=t(9);var _=function(e){var s=e.metricsUrl,t=e.user,n=Object(i.useState)({neck_size:"",chest_size:"",waist_size:"",hip_size:"",thigh_size:"",calf_size:"",bicep_size:"",forearm_size:"",height_feet:"",height_inches:"",weight_lbs:"",user_id:t.id}),c=Object(a.a)(n,2),r=c[0],j=c[1],m=Object(i.useState)(!1),_=Object(a.a)(m,2),f=_[0],O=_[1],g=Object(h.f)(),x=function(e){var s=e.target.name;j(Object(u.a)(Object(u.a)({},r),{},Object(o.a)({},s,e.target.value)))};function z(){return(z=Object(p.a)(b.a.mark((function e(i){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.preventDefault(),e.next=3,fetch("".concat(s),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({neck_size:r.neck_size,chest_size:r.chest_size,waist_size:r.waist_size,hip_size:r.hip_size,thigh_size:r.thigh_size,calf_size:r.calf_size,bicep_size:r.bicep_size,forearm_size:r.forearm_size,height_feet:r.height_feet,height_inches:r.height_inches,weight_lbs:r.weight_lbs,user_id:t.id})}).then((function(e){e.ok?(j({neck_size:"",chest_size:"",waist_size:"",hip_size:"",thigh_size:"",calf_size:"",bicep_size:"",forearm_size:"",height_feet:"",height_inches:"",weight_lbs:"",user_id:t.id}),g("/memberspage")):e.json().then((function(e){O(e)}))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(l.b,{id:"skip",to:"/memberspage",children:"Skip"}),Object(d.jsxs)("div",{id:"measurements_box",children:[Object(d.jsx)("h1",{id:"measurements_text",children:"Measurements"}),Object(d.jsxs)("form",{id:"measurement_form",autoComplete:"off",onSubmit:function(e){return z.apply(this,arguments)},children:[Object(d.jsx)("h4",{className:"measurements_descriptor",children:"Circumference of neck in inches?"}),Object(d.jsx)("input",{value:r.neck_size,type:"number",step:"0.25",className:"measurement_fields",id:"neck_size_field",name:"neck_size",placeholder:"Neck size",onChange:x}),Object(d.jsx)("br",{}),Object(d.jsx)("h4",{className:"measurements_descriptor",children:"Circumference of chest in inches?"}),Object(d.jsx)("input",{value:r.chest_size,type:"number",step:"0.25",className:"measurement_fields",id:"chest_size_field",name:"chest_size",placeholder:"Chest size",onChange:x}),Object(d.jsx)("br",{}),Object(d.jsx)("h4",{className:"measurements_descriptor",children:"Circumference of waist in inches?"}),Object(d.jsx)("input",{value:r.waist_size,type:"number",step:"0.25",className:"measurement_fields",id:"waist_size",name:"waist_size",placeholder:"Waist",onChange:x}),Object(d.jsx)("br",{}),Object(d.jsx)("h4",{className:"measurements_descriptor",children:"Circumference of hips in inches?"}),Object(d.jsx)("input",{value:r.hips_size,type:"number",step:"0.25",className:"measurement_fields",id:"hips_size_field",name:"hips_size",placeholder:"Hips",onChange:x}),Object(d.jsx)("br",{}),Object(d.jsx)("h4",{className:"measurements_descriptor",children:"Circumference of thighs in inches?"}),Object(d.jsx)("input",{value:r.thigh_size,type:"number",step:"0.25",className:"measurement_fields",id:"thigh_size_field",name:"thigh_size",placeholder:"Thighs",onChange:x}),Object(d.jsx)("br",{}),Object(d.jsx)("h4",{className:"measurements_descriptor",children:"Circumference of calf in inches?"}),Object(d.jsx)("input",{value:r.calf_size,type:"number",step:"0.25",className:"measurement_fields",id:"calf_size_field",name:"calf_size",placeholder:"Calf",onChange:x}),Object(d.jsx)("br",{}),Object(d.jsx)("h4",{className:"measurements_descriptor",children:"Circumference of bicep in inches?"}),Object(d.jsx)("input",{value:r.bicep_size,type:"number",step:"0.25",className:"measurement_fields",id:"bicep_size_field",name:"bicep_size",placeholder:"Bicep",onChange:x}),Object(d.jsx)("br",{}),Object(d.jsx)("h4",{className:"measurements_descriptor",children:"Circumference of forearm in inches?"}),Object(d.jsx)("input",{value:r.forearm_size,type:"number",step:"0.25",className:"measurement_fields",id:"forearm_size_field",name:"forearm_size",placeholder:"Forearm",onChange:x}),Object(d.jsx)("br",{}),Object(d.jsx)("h4",{className:"measurements_descriptor",children:"What's your height?"}),Object(d.jsx)("input",{value:r.height_feet,type:"number",step:"1",pattern:"\\d+",className:"measurement_fields",id:"height_feet_field",name:"height_feet",placeholder:"Feet",onChange:x}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{value:r.height_inches,type:"number",step:"1",pattern:"\\d+",className:"measurement_fields",id:"height_inches_field",name:"height_inches",placeholder:"Inches",onChange:x}),Object(d.jsx)("br",{}),Object(d.jsx)("h4",{className:"measurements_descriptor",children:"What's your weight in Lbs?"}),Object(d.jsx)("input",{value:r.weight_lbs,type:"number",ste:"0.01",className:"measurement_fields",id:"weight_lbs_field",name:"weight_lbs",placeholder:"Weight",onChange:x}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"submit",value:"Submit",id:"submit_measurement_button"})]}),Object(d.jsx)("div",{id:"measurement_error_box",children:f?f.map((function(e){return Object(d.jsx)("p",{children:e},e)})):null})]})]})};var f=function(e){var s=e.signUpUrl,t=e.user,n=e.onLogin,c=(e.metricsUrl,Object(h.f)()),r=Object(i.useState)({first_name:"",last_name:"",birthdate:"",username:"",password:""}),l=Object(a.a)(r,2),j=l[0],m=l[1],b=function(e){var s=e.target.name;m(Object(u.a)(Object(u.a)({},j),{},Object(o.a)({},s,e.target.value)))};return Object(d.jsxs)("div",{id:"sign_up_box",children:[Object(d.jsx)("h1",{id:"join_text",children:"Join"}),Object(d.jsxs)("form",{id:"sign_up_form",autoComplete:"off",onSubmit:function(e){e.preventDefault(),fetch("".concat(s),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{first_name:j.first_name,last_name:j.last_name,birthdate:j.birthdate,username:j.username,password:j.password}})}).then((function(e){e.ok&&e.json().then((function(e){return n(e)}))})).then((function(){m({first_name:"",last_name:"",birthdate:"",username:"",password:""}),c("/measurements")})),console.log("SignUp.js user",t)},children:[Object(d.jsx)("h4",{className:"sign_up_descriptor",children:"First name"}),Object(d.jsx)("input",{required:!0,value:j.first_name,type:"text",className:"sign_up_input_fields",id:"first_name_field",name:"first_name",placeholder:"First Name",onChange:b}),Object(d.jsx)("br",{}),Object(d.jsx)("h4",{className:"sign_up_descriptor",children:"Last name"}),Object(d.jsx)("input",{required:!0,value:j.last_name,type:"text",className:"sign_up_input_fields",id:"last_name_field",name:"last_name",placeholder:"Last Name",onChange:b}),Object(d.jsx)("br",{}),Object(d.jsx)("h4",{className:"sign_up_descriptor",children:"Date of birth"}),Object(d.jsx)("input",{required:!0,value:j.birthdate,type:"date",className:"sign_up_input_fields",id:"birthdate_field",name:"birthdate",placeholder:"Date of Birth",onChange:b}),Object(d.jsx)("br",{}),Object(d.jsx)("h4",{className:"sign_up_descriptor",children:"Username"}),Object(d.jsx)("input",{required:!0,value:j.username,type:"text",className:"sign_up_input_fields",id:"username_field",name:"username",placeholder:"Username",onChange:b}),Object(d.jsx)("br",{}),Object(d.jsx)("h4",{className:"sign_up_descriptor",children:"Password"}),Object(d.jsx)("input",{required:!0,value:j.password,type:"password",className:"sign_up_input_fields",id:"password_field",name:"password",placeholder:"Password",onChange:b}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{id:"submit_button",type:"submit",value:"Submit"})]})]})};var O=function(e){var s=e.setUser,t=e.logOutUrl,i=e.user,n=Object(h.f)();function c(){return(c=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t),{method:"DELETE"}).then((function(e){e.ok&&(s(null),n("/"))}));case 2:console.log("Empty user check",i);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)(l.b,{className:"header_link",to:"/accountmanagement",children:"Manage Account"}),Object(d.jsx)("button",{className:"header_link",id:"log_out_button",onClick:function(){return c.apply(this,arguments)},children:"Sign Out"})]})};var g=function(e){var s=e.memberUrl,t=e.metricsUrl,n=Object(i.useState)({metrics:[]}),c=Object(a.a)(n,2),r=c[0],l=c[1],h=Object(i.useState)([]),o=Object(a.a)(h,2),u=o[0],j=o[1];Object(i.useEffect)((function(){fetch("".concat(s)).then((function(e){return e.json()})).then((function(e){l(e)}))}),[s,u]);var m=r.metrics.map((function(e){var s=e.created_at.split("T")[0];return e.neck_size||e.hips_size||e.bicep_size||e.chest_size||e.calf_size||e.thigh_size||e.waist_size||e.weight_lbs||e.forearm_size||e.height_feet?Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"user_metric_box",id:e.id,children:Object(d.jsxs)("ul",{id:e.id,className:"metric_ul",children:[e.neck_size?Object(d.jsxs)("li",{className:"neck",id:"neck".concat(e.id),children:[Object(d.jsx)("strong",{children:"Neck circumference:"})," ",e.neck_size,"in"]}):null,e.chest_size?Object(d.jsxs)("li",{className:"chest",id:"chest".concat(e.id),children:[Object(d.jsx)("strong",{children:"Chest circumference:"})," ",e.chest_size,"in"]}):null,e.waist_size?Object(d.jsxs)("li",{className:"waist",id:e.id,children:[Object(d.jsx)("strong",{children:"Waist circumference:"})," ",e.waist_size,"in"]}):null,e.hip_size?Object(d.jsxs)("li",{className:"hip",id:e.id,children:[Object(d.jsx)("strong",{children:"Hip circumference:"})," ",e.hip_size,"in"]}):null,e.thigh_size?Object(d.jsxs)("li",{className:"thigh",id:e.id,children:[Object(d.jsx)("strong",{children:"Thigh circumference:"})," ",e.thigh_size,"in"]}):null,e.calf_size?Object(d.jsxs)("li",{className:"calf",id:e.id,children:[Object(d.jsx)("strong",{children:"Calf circumference:"})," ",e.calf_size,"in"]}):null,e.bicep_size?Object(d.jsxs)("li",{className:"bicep",id:e.id,children:[Object(d.jsx)("strong",{children:"Bicep circumference:"})," ",e.bicep_size,"in"]}):null,e.forearm_size?Object(d.jsxs)("li",{className:"forearm",id:e.id,children:[Object(d.jsx)("strong",{children:"Forearm circumference:"})," ",e.forearm_size,"in"]}):null,e.height_feet?Object(d.jsxs)("li",{className:"height",id:e.id,children:[Object(d.jsx)("strong",{children:"Height:"})," ",e.height_feet,"'"," ",e.height_inches,'"']}):null,e.weight_lbs?Object(d.jsxs)("li",{className:"weight",id:e.id,children:[Object(d.jsx)("strong",{children:"Weight:"})," ",e.weight_lbs,"lbs"]}):null,Object(d.jsxs)("li",{className:"created",id:e.id,children:[Object(d.jsx)("strong",{children:"Created:"}),s]}),Object(d.jsx)("button",{className:"remove_metric",value:e.id,onClick:function(){return function(e){fetch("".concat(t,"/").concat(e.id),{method:"DELETE"}),j(u.filter((function(s){return s.id!==e.id})))}(e)},children:"\u274c"})]})})}):null}));return Object(d.jsxs)("div",{className:"user_metrics",children:[Object(d.jsxs)("div",{id:"member_name",children:["Member:",r.first_name," ",r.last_name]}),m]})};var x=function(e){var s=e.user,t=e.userUrl,n=Object(i.useState)(!1),c=Object(a.a)(n,2),r=c[0],l=c[1],j=Object(h.f)(),m=Object(i.useState)({user:s.id,password:""}),b=Object(a.a)(m,2),p=b[0],_=b[1];function f(e){e.preventDefault(),fetch("".concat(t).concat(s.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:s.id,password:p.password})}).then((function(e){e.ok?j("/memberspage"):_({password:""})}))}return Object(d.jsxs)("div",{id:"manage_account_box",children:[Object(d.jsxs)("div",{children:["Welcome:"," ",Object(d.jsxs)("strong",{children:[s.first_name," ",s.last_name]})]}),r?Object(d.jsxs)("form",{autoComplete:"off",onSubmit:f,children:[Object(d.jsx)("input",{required:!0,value:p.password,type:"password",className:"login_input_fields",id:"password_field",name:"password",placeholder:"New Password",onChange:function(e){var s=e.target.name;_(Object(u.a)(Object(u.a)({},p),{},Object(o.a)({},s,e.target.value)))}}),Object(d.jsx)("button",{id:"change_password_button",onClick:f,children:"Change"})]}):Object(d.jsxs)("span",{children:[Object(d.jsx)("h3",{children:"Change password?"}),Object(d.jsx)("button",{id:"change_password_button",onClick:function(){l(!0)},children:"Yes!"})]})]})},z="/api/login",v="/api/metrics",N="/api/me";var w=function(){var e=Object(i.useState)({}),s=Object(a.a)(e,2),t=s[0],n=s[1];return Object(i.useEffect)((function(){fetch("".concat(N)).then((function(e){e.ok&&e.json().then((function(e){return n(e)}))}))}),[]),console.log("app.js user",t),Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(l.a,{children:Object(d.jsxs)(h.c,{children:[Object(d.jsx)(h.a,{exact:!0,path:"/",element:t&&t.id?Object(d.jsx)(_,{user:t,metricsUrl:v}):Object(d.jsx)(j,{loginUrl:z,setUser:n,user:t})}),Object(d.jsx)(h.a,{exact:!0,path:"/signup",element:Object(d.jsx)(f,{signUpUrl:"/api/signup",user:t,onLogin:n,metricsUrl:v})}),Object(d.jsx)(h.a,{exact:!0,path:"/measurements",element:t&&t.id?Object(d.jsx)(_,{metricsUrl:v,user:t}):Object(d.jsx)(j,{loginUrl:z,setUser:n,user:t})}),Object(d.jsx)(h.a,{exact:!0,path:"/memberspage",element:t&&t.id?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(O,{setUser:n,user:t,logOutUrl:"/api/logout"}),Object(d.jsx)(g,{memberUrl:N,metricsUrl:v})]}):Object(d.jsx)(j,{loginUrl:z,setUser:n,user:t})}),Object(d.jsx)(h.a,{exact:!0,path:"/accountmanagement",element:t&&t.id?Object(d.jsx)(x,{memberUrl:N,userUrl:"/api/users/",user:t,setUser:n}):Object(d.jsx)(j,{loginUrl:z,setUser:n,user:t})})]})})})};r.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(w,{})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.b1917b10.chunk.js.map